<!-- ================================
     PROJECT 7 — WORKFLOW DIAGRAM
=================================== -->
<section class="section-dark">
  <h2 class="section-title">Architecture Workflow</h2>

  <div class="arch-diagram">
    <svg class="workflow-svg" viewBox="0 0 1500 200" xmlns="http://www.w3.org/2000/svg">

      <!-- Internet -->
      <rect x="10" y="60" width="200" height="70" rx="14"
            fill="#05131a" stroke="#2ec4ff" stroke-width="2"/>
      <text x="110" y="102" text-anchor="middle" fill="#2ec4ff" font-size="14">
        Internet / User Browser
      </text>

      <!-- Public Subnet (Web EC2) -->
      <rect x="260" y="40" width="300" height="110" rx="14"
            fill="#05131a" stroke="#7e3cff" stroke-width="2"/>
      <text x="410" y="85" text-anchor="middle" fill="#7e3cff" font-size="14">
        Public Subnet (10.10.1.0/24)
      </text>
      <text x="410" y="110" text-anchor="middle" fill="#9fb8c7" font-size="12">
        Web EC2 — Nginx + PHP
      </text>

      <!-- Private Subnet (DB EC2) -->
      <rect x="620" y="40" width="340" height="110" rx="14"
            fill="#05131a" stroke="#ff9900" stroke-width="2"/>
      <text x="790" y="85" text-anchor="middle" fill="#ff9900" font-size="14">
        Private Subnet (10.10.2.0/24)
      </text>
      <text x="790" y="110" text-anchor="middle" fill="#9fb8c7" font-size="12">
        MySQL Database EC2
      </text>

      <!-- Optional NAT -->
      <rect x="1010" y="60" width="220" height="70" rx="14"
            fill="#05131a" stroke="#2ec4ff" stroke-width="2"/>
      <text x="1120" y="102" text-anchor="middle" fill="#2ec4ff" font-size="13">
        (Optional) NAT Gateway
      </text>

      <!-- Arrows -->
      <line x1="210" y1="95" x2="260" y2="95" stroke="#2ec4ff" stroke-width="2"/>
      <line x1="560" y1="95" x2="620" y2="95" stroke="#7e3cff" stroke-width="2"/>
      <line x1="960" y1="95" x2="1010" y2="95" stroke="#ff9900" stroke-width="2"/>

    </svg>
  </div>

  <!-- Explanation Section -->
  <h2 class="section-title">Detailed Explanation</h2>

  <p class="lead">
    This project demonstrates a production-ready **two-tier AWS architecture** where the web server runs
    in a public subnet while the MySQL database runs in a fully isolated private subnet. Strict networking,
    security group references, and NACL rules ensure secure and predictable communication.
  </p>

  <ul class="exp-list">

    <li>
      <strong>Internet User Access:</strong>
      Users reach the application through the public web server hosted on an EC2 instance. Only HTTP/HTTPS
      ports are exposed to the internet to follow least-privilege security.
    </li>

    <li>
      <strong>Public Subnet — Web EC2:</strong>
      Hosts Nginx + PHP. Accepts public traffic, processes requests, and communicates with the database tier.
      It has a security group that allows:
      <ul>
        <li>HTTP/HTTPS from anywhere</li>
        <li>SSH only from admin IP</li>
      </ul>
    </li>

    <li>
      <strong>Private Subnet — DB EC2:</strong>
      MySQL is installed on a separate EC2 instance with <strong>no public IP</strong>. It is accessible only
      from the Web EC2 using a security group reference (not IP-based). Database user rules (e.g.,
      <code>user@10.10.%</code>) allow VPC-restricted authentication.
    </li>

    <li>
      <strong>Security Groups:</strong>
      <ul>
        <li><strong>sg_web:</strong> Allows HTTP/HTTPS + SSH</li>
        <li><strong>sg_db:</strong> Allows MySQL (3306) <strong>only from sg_web</strong></li>
      </ul>
      The SG reference ensures DB is completely hidden from the outside world.
    </li>

    <li>
      <strong>NACL Rules:</strong>
      Stateless rules applied at subnet level. Correct ephemeral port return paths are essential to avoid dropped packets.
    </li>

    <li>
      <strong>Optional NAT Gateway:</strong>
      Used for installing packages (apt update) on the private instance. Can be disabled after setup to avoid extra billing.
    </li>

    <li>
      <strong>Traffic Flow Summary:</strong>
      <ul>
        <li>User → Public EC2 (Nginx/PHP)</li>
        <li>Public EC2 → Database EC2 (3306)</li>
        <li>Private EC2 never communicates directly with the internet</li>
      </ul>
    </li>

  </ul>
</section>
