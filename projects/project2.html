<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Project 02 — Automated Web Hosting System</title>

  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../style.css?v=30" />
</head>

<body>

<header class="site-header">
  <div class="container header-inner">
    <a href="../index.html" class="brand-link">
      <span class="brand-logo">ROHITH JP</span>
    </a>
    <nav class="nav">
      <a href="../index.html">Home</a>
      <a href="project1.html">Projects</a>
      <a href="../experience/experience.html">Experience</a>
      <a href="../index.html#contact">Contact</a>
    </nav>
  </div>
</header>

<main>

<!-- HERO -->
<section class="hero-small">
  <div class="container">
    <h1 class="page-title" style="font-size:40px;font-weight:700;">
      02 — Automated Web Hosting System
    </h1>
    <p class="lead">
      End-to-end static website hosting using EC2, S3, IAM Roles, Nginx, and full Bash automation.
    </p>
  </div>
</section>


<section class="section-light">
  <div class="container">

    <!-- OVERVIEW -->
    <h2 class="section-title">Project Overview</h2>
    <p class="lead">
      This project automates the complete provisioning of a static website using AWS EC2, S3, and User Data scripting.
      The EC2 instance automatically installs Nginx, pulls content from S3, configures permissions, enables a firewall,
      logs all setup steps, and instantly serves the website after launch.
    </p>

    <h3 class="sub-heading">Goal</h3>
    <p>
      To automate the deployment of a secure and production-ready static web hosting system using AWS services and Bash scripts.
    </p>

    <h3 class="sub-heading">Technologies Used</h3>
    <ul class="exp-list">
      <li>AWS EC2 (Ubuntu 22.04)</li>
      <li>AWS S3 (Static file storage)</li>
      <li>IAM Role (Credential-less S3 access)</li>
      <li>AWS CLI v2</li>
      <li>Nginx Web Server</li>
      <li>User Data Automation</li>
      <li>Mac Terminal + SSH</li>
    </ul>

    <!-- WORKFLOW -->
    <h2 class="section-title">Workflow Diagram</h2>
    <div class="workflow-box" style="max-height:200px;overflow-y:auto;">

      <pre class="flow-block" style="font-size:14px;line-height:1.55;">
Mac Terminal
   |
   v
Upload HTML site → S3 Bucket
   |
   v
Launch EC2 with IAM Role + User Data
   |
   v
User Data:
  • Install Nginx
  • Install AWS CLI v2
  • Sync S3 → /var/www/html
  • Fix permissions
  • Enable firewall
   |
   v
Website Automatically Live
      </pre>

    </div>

    <!-- WHAT I LEARNED -->
    <h2 class="section-title">What I Learned</h2>
    <ul class="exp-list">
      <li>Using IAM Roles instead of static AWS credentials</li>
      <li>Debugging EC2 User Data execution failures</li>
      <li>Fixing Nginx 403 errors and permission issues</li>
      <li>Configuring UFW firewall for secure deployments</li>
      <li>Automating deployments with S3 and AWS CLI</li>
      <li>Understanding Nginx web root structure</li>
    </ul>

    <!-- TECHNIQUES THAT WORKED -->
    <h2 class="section-title">Techniques That Worked</h2>
    <ul class="exp-list">
      <li>User Data for automatic provisioning</li>
      <li>IAM Role → EC2 for secure S3 access</li>
      <li>aws s3 sync for deployment automation</li>
      <li>www-data ownership for correct permissions</li>
      <li>Logging everything to /var/log/site_setup.log</li>
    </ul>

    <!-- TROUBLESHOOTING -->
    <h2 class="section-title">Troubleshooting & Fixes</h2>

    <div class="exp-preview">
      <ul class="exp-list">
        <li><strong>Default Nginx Page</strong> → Removed default index file</li>
        <li><strong>403 Forbidden</strong> → Incorrect permissions → fixed with proper ownership</li>
        <li><strong>AWS CLI not found</strong> → Installed AWS CLI v2 manually</li>
        <li><strong>SSL Browser Warning</strong> → Self-signed cert (expected)</li>
        <li><strong>User Data not executing</strong> → Relaunched instance with correct script</li>
      </ul>
    </div>

    <!-- RUNBOOK -->
    <h2 class="section-title">Step-by-Step Runbook</h2>

    <h3 class="sub-heading">Mac Terminal</h3>
    <pre class="code-block">
aws s3 mb s3://rohit-static-site-2025
aws s3 sync ./site/ s3://rohit-static-site-2025/

ssh -i ~/.ssh/webKey.pem ubuntu@&lt;public-ip&gt;

sudo tail -n 50 /var/log/site_setup.log
    </pre>

    <h3 class="sub-heading">AWS Console Tasks</h3>
    <ul class="exp-list">
      <li>Create IAM Role → AmazonS3ReadOnlyAccess</li>
      <li>Create Security Group → SSH, HTTP, HTTPS</li>
      <li>Create Key Pair → chmod 400</li>
      <li>Launch EC2 → Attach IAM Role + User Data</li>
    </ul>

    <!-- USER DATA SCRIPT -->
    <h2 class="section-title">Final User Data Script</h2>
    <pre class="code-block">
#!/bin/bash
set -e
LOG="/var/log/site_setup.log"
echo "=== Site setup started at $(date) ===" >> $LOG

apt-get update -y >> $LOG 2>&1
apt-get install -y nginx python3-pip unzip curl ufw >> $LOG 2>&1

curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" \
  -o "/tmp/awscliv2.zip" >> $LOG 2>&1
unzip /tmp/awscliv2.zip -d /tmp >> $LOG 2>&1
/tmp/aws/install >> $LOG 2>&1

systemctl enable nginx
systemctl start nginx

rm -rf /var/www/html/*
aws s3 sync s3://rohit-static-site-2025 /var/www/html >> $LOG 2>&1

chown -R www-data:www-data /var/www/html
chmod -R 755 /var/www/html

ufw allow OpenSSH
ufw allow 'Nginx Full'
ufw --force enable

echo "=== Site setup finished at $(date) ===" >> $LOG
    </pre>

    <!-- SECURITY -->
    <h2 class="section-title">Security & Production Notes</h2>
    <ul class="exp-list">
      <li>Restrict SSH to your IP</li>
      <li>Use IAM Roles instead of static keys</li>
      <li>Use S3 + CloudFront for better scalability</li>
      <li>Plan HTTPS using Certbot</li>
    </ul>

    <!-- NEXT STEPS -->
    <h2 class="section-title">Next Steps & Improvements</h2>
    <ul class="exp-list">
      <li>CI/CD for S3 deployments</li>
      <li>CloudFront CDN + HTTPS</li>
      <li>Infrastructure as Code (Terraform)</li>
      <li>CloudWatch monitoring</li>
    </ul>

    <!-- BUTTONS -->
    <div style="margin-top:40px;text-align:center;">
      <a class="btn btn-strong" href="https://github.com/RohithJP/Projects/tree/main" target="_blank">View Repo</a>

      <a class="btn btn-outline-strong" style="margin-left:12px;" href="project1.html">← Previous</a>

      <a class="btn btn-strong" style="margin-left:12px;" href="project3.html">Next →</a>
    </div>

  </div>
</section>

</main>

<footer class="site-footer">
  <div class="container">
    <small>© 2025 Rohith Jothilakshmi Periyasamy — AWS Cloud Engineer</small>
  </div>
</footer>

</body>
</html>
