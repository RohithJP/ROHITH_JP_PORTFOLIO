<!-- ================================
     NEW WORKFLOW DIAGRAM — PROJECT 4
=================================== -->
<section class="section-dark">
  <h2 class="section-title">Architecture Workflow</h2>

  <div class="arch-diagram">
    <svg class="workflow-svg" viewBox="0 0 1220 150" xmlns="http://www.w3.org/2000/svg">

      <!-- India Team -->
      <rect x="10" y="45" width="200" height="55" rx="12"
            fill="#05131a" stroke="#2ec4ff" stroke-width="1.8"/>
      <text x="110" y="78" text-anchor="middle" fill="#2ec4ff" font-size="13">
        India Dev Team (SFTP Upload)
      </text>

      <!-- EC2 SFTP Server -->
      <rect x="240" y="45" width="220" height="55" rx="12"
            fill="#05131a" stroke="#7e3cff" stroke-width="1.8"/>
      <text x="350" y="78" text-anchor="middle" fill="#7e3cff" font-size="13">
        EC2 SFTP Server (Chrooted Users)
      </text>

      <!-- Automation Script -->
      <rect x="490" y="45" width="230" height="55" rx="12"
            fill="#05131a" stroke="#2ec4ff" stroke-width="1.8"/>
      <text x="605" y="78" text-anchor="middle" fill="#2ec4ff" font-size="13">
        Automation Script (Cron + AWS CLI)
      </text>

      <!-- S3 Storage -->
      <rect x="750" y="45" width="230" height="55" rx="12"
            fill="#05131a" stroke="#ff9900" stroke-width="1.8"/>
      <text x="865" y="78" text-anchor="middle" fill="#ff9900" font-size="13">
        S3 Bucket (Versioned + Audit Logs)
      </text>

      <!-- UK Team -->
      <rect x="1010" y="45" width="200" height="55" rx="12"
            fill="#05131a" stroke="#2ec4ff" stroke-width="1.8"/>
      <text x="1110" y="78" text-anchor="middle" fill="#2ec4ff" font-size="13">
        UK Sales Team (Download Files)
      </text>

      <!-- Arrows -->
      <line x1="210" y1="72" x2="240" y2="72" stroke="#2ec4ff" stroke-width="2"/>
      <line x1="460" y1="72" x2="490" y2="72" stroke="#7e3cff" stroke-width="2"/>
      <line x1="720" y1="72" x2="750" y2="72" stroke="#2ec4ff" stroke-width="2"/>
      <line x1="980" y1="72" x2="1010" y2="72" stroke="#ff9900" stroke-width="2"/>

    </svg>
  </div>

  <h2 class="section-title">Detailed Explanation</h2>

  <p class="lead">
    This secure workflow automates file transfers between remote teams using a hardened EC2 SFTP server
    and S3 versioning for safe recovery.
  </p>

  <ul class="exp-list">
    <li><strong>India Dev Team:</strong> Uploads files securely via SFTP using isolated chrooted directories.</li>

    <li><strong>EC2 SFTP Server:</strong> Only SFTP is enabled, no shell access. IAM role attached for S3 upload permissions.</li>

    <li><strong>Cron Automation:</strong> Every minute, an AWS CLI script syncs <code>/uploads</code> to S3, preserving timestamps.</li>

    <li><strong>S3 Versioning:</strong> Ensures every uploaded file retains its history — perfect for rollback and audit.</li>

    <li><strong>UK Sales Team:</strong> Accesses the latest version or retrieves older revisions through version history.</li>

    <li><strong>Security Layers:</strong> Chroot restrictions, IAM least-privilege, CloudWatch logs, and strict SG rules.</li>
  </ul>
</section>
